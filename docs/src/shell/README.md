# Shell for DevOps

## Linux Filesystem

In a Linux distribution, several critical directories hold essential system files, configurations, and user data. Among these, `/etc`, `/var`, `/bin`, `/usr`, and `/home` are some of the most important directories.

`/etc`: This directory contains system-wide configuration files. It houses crucial settings for various services, software applications, and the system itself. Files such as `/etc/passwd` (user account information), `/etc/apt/sources.list` (APT package manager configuration), and `/etc/hostname` (system hostname) reside here. Administrators often tweak settings in this directory to manage system behavior and software configurations.

`/var`: This directory stores variable data generated by running processes. It includes files that change frequently during system operation, such as logs (`/var/log`), databases (`/var/lib`), mail (`/var/mail`), and temporary files (`/var/tmp`). System logs and application data often reside here, offering insights into system health and performance.

`/bin` and `/usr`: These directories contain executable binaries and essential system commands. `/bin` holds fundamental commands crucial for system booting and repair, while `/usr/bin` contains standard user commands and binaries for installed software.

`/home`: This directory houses user home directories. Each user typically has a dedicated subdirectory (`/home/username`) storing their personal files, configurations, and settings. It's a critical space for user-specific data, allowing customization and privacy for individual users.

These directories form the backbone of a Linux system, encompassing critical configurations, system data, executable files, and user-specific information essential for the system's functionality and user experience.

In Linux distributions, file permissions and ownership are managed through a robust system known as "rights management." This system controls access to files and directories, ensuring security and privacy across the system. Each file and directory has associated permissions determining who can read, write, or execute them. These permissions are categorized for three types of users: the file owner, the user group associated with the file, and others.

File permissions consist of three main components: read, write, and execute, denoted by "r," "w," and "x," respectively. Permissions are represented in a series of three characters for each category of users (owner, group, and others) and can be modified using commands like `chmod` in the terminal. In addition to permissions, ownership plays a crucial role. Each file and directory has an owner and a group associated with it. The owner can modify permissions and change ownership, while members of the associated group might have specific access rights. This system ensures that only authorized users or processes can access or modify specific files, enhancing security.

The inode, a fundamental concept in Unix-based file systems, plays a key role in managing files. An inode, short for "index node," is a data structure that stores metadata about a file, excluding the file's name and actual data content. It contains information such as permissions, ownership, file type, timestamps, and pointers to the actual data blocks on the disk. Inodes help the operating system locate and manage files efficiently. They are crucial in file system navigation, allowing quick access and modification of file metadata while optimizing storage by reducing duplicated information about files. As files are created, modified, or deleted, the inodes are updated to reflect these changes, facilitating file system operations and organization.

```bash
├── bin                         # Essential system binaries.
│   ├── /bin                    # Core command binaries.
│   ├── /sbin                   # System binaries for administration tasks.
│   └── /usr                    # Additional user binaries.
│       └── /usr/bin            # User command binaries.
├── boot                        # Boot-related files.
│   ├── /boot/grub              # GRUB bootloader files and config.
│   └── /boot/kernel            # Kernel and related files.
├── dev                         # Device files representing hardware devices.
│   ├── /dev/pts                # Pseudo-terminal devices.
│   └── /dev/shm                # Shared memory files and objects.
├── etc                         # System-wide configuration files.
│   ├── /etc/network            # Network configuration files.
│   ├── /etc/apt                # APT package manager configuration.
│   └── /etc/default            # Default config for various applications.
├── home                        # User home directories.
│   ├── /home/user1             # Individual user directories.
│   └── /home/user2
├── lib                         # Essential shared libraries.
├── media                       # Mount point for removable media.
├── mnt                         # Temporary mount point for additional filesystems.
├── opt                         # Optional third-party software.
├── proc                        # Virtual filesystem providing process-related info.
├── root                        # Home directory for the root user.
├── run                         # System information since the last boot.
│   └── /run/user               # User-specific runtime info.
├── sbin                        # System binaries for administration tasks.
├── srv                         # Site-specific data served by the system.
├── sys                         # Virtual filesystem with hardware device info.
├── tmp                         # Temporary files, deleted upon reboot.
├── usr                         # User-related programs and resources.
│   ├── /usr/local              # Locally installed software.
│   └── /usr/share              # Architecture-independent data.
└── var                         # Variable data, logs, caches, temporary files.
    ├── /var/log                # System log files.
    └── /var/cache              # Cached data from installed packages.
```

#### `tree`

Displays the directory structure in a tree-like format.

**Example:**
```bash
tree
```

#### `chmod`

Modify file/directory permissions.

**Example:**
```bash
chmod +x script.sh
```

## Basic Commands

#### `cd`

Change directory.

**Example:**
```bash
cd /path/to/directory
```

#### `ls`

List directory contents.

**Example:**
```bash
ls -l
```

- `-l`: Long format, displaying detailed information.

#### `pwd`

Print working directory.

**Example:**
```bash
pwd
```

## Package Managers

#### `apt`

Package manager for Debian-based systems.

**Example:**
```bash
apt update
```

- `update`: Updates the package index.

**Config Files:** 
- `sources.list`: Contains a list of repository URLs used by `apt`.
- `/etc/apt/sources.list.d/`: Additional sources for `apt`.

**Removing Packages:** 
- `apt remove package_name`: Removes a package.
- `apt purge package_name`: Removes a package along with its configuration files.

#### `yum`

Package manager for RPM-based systems like CentOS.

**Example:**
```bash
yum install package_name
```

**Config Files:** 
- `/etc/yum.conf`: Main configuration file for `yum`.
- `/etc/yum.repos.d/`: Directory containing repository configuration files.

**Removing Packages:** 
- `yum remove package_name`: Removes a package.

#### `dnf`

Package manager, newer version of `yum`, used in Fedora.

**Example:**
```bash
dnf search keyword
```

**Config Files:** 
- `/etc/dnf/dnf.conf`: Main configuration file for `dnf`.
- `/etc/yum.repos.d/`: Directory containing repository configuration files.

**Removing Packages:** 
- `dnf remove package_name`: Removes a package.

#### `pacman`

Package manager for Arch Linux.

**Example:**
```bash
pacman -Syu
```

- `-Syu`: Synchronizes package databases and upgrades installed packages.

**Config Files:** 
- `/etc/pacman.conf`: Main configuration file for `pacman`.
- `/etc/pacman.d/`: Directory containing repository configuration files.

**Removing Packages:** 
- `pacman -R package_name`: Removes a package.

## Basic Network Debugging

#### `ping`

Test connectivity to a remote host.

**Example:**
```bash
ping google.com
```

#### `ssh`

Securely connect to a remote server.

**Example:**
```bash
ssh username@hostname
```

#### `telnet`

Communicate with another host using the Telnet protocol (less secure).

**Example:**
```bash
telnet example.com 80
```

#### `wget`

Retrieve content from web servers via HTTP, HTTPS, FTP.

**Example:**
```bash
wget https://example.com/file.tar.gz
```

## Others


#### `grep`

Search for specific patterns in files.

**Example:**
```bash
grep "pattern" file.txt
```

- `-i`: Ignore case distinctions.
- `-r`: Recursively search subdirectories.
- `-n`: Show line numbers.

#### `sed`

Stream editor for modifying and formatting text.

**Example:**
```bash
sed 's/old_text/new_text/' file.txt
```

- `'s/old_text/new_text/'`: Substitute `old_text` with `new_text`.
- `-i`: Edit files in place.

#### `awk`

Text processing tool for extracting and manipulating data.

**Example:**
```bash
awk '{print $1}' file.txt
```

- `'{print $1}'`: Print the first field of each line.
- `-F`: Set field separator.

#### `ps`

Display information about running processes.

**Example:**
```bash
ps aux
```

- `aux`: Display all processes with a user-oriented format.

#### `top` or `htop`

Monitoring tools to view system processes and resource usage.

**Example:**
```bash
top
```

- `Shift + M`: Sort by memory usage in `top`.
- `F6` (in `htop`): Sort by various fields.


#### `git`

Version control system for tracking changes in code.

**Example:**
```bash
git clone repository_url
```

- `clone`: Clone a repository.
- `add`: Add file contents to the index.

## Exercises

### 🧪  Mini Project 1: File System Management Script

**Objective:** Create a script that organizes files in a directory, lists permissions, and performs basic operations.

:::details file_system_management.sh

```bash
#!/bin/bash

# Create a directory and navigate into it
mkdir project_files
cd project_files

# Create sample files
touch file1.txt file2.txt
mkdir sub_directory
touch sub_directory/file3.txt

# List files and permissions
echo "Listing files and permissions:"
ls -l

# Change permissions
chmod 755 file1.txt
chmod 644 file2.txt

# Display new permissions
echo "Updated permissions:"
ls -l

# Move files to the sub-directory
mv file1.txt sub_directory/
mv file2.txt sub_directory/

# Copy file3.txt to the main directory
cp sub_directory/file3.txt ./

# Remove the sub-directory and its contents
rm -r sub_directory

# Final file listing
echo "Files after operations:"
ls -l

# Cleanup
rm file*.txt
cd ..
rm -r project_files

:::

### 🧪  Mini Project 2: Basic Networking Script

**Objective:** Create a script that tests network connectivity and retrieves content from the web.

 :::details network_test.sh

```bash
#!/bin/bash

# Test network connectivity
echo "Pinging Google..."
ping -c 4 google.com

# Connect to a remote server via SSH
echo "Attempting SSH connection..."
# Replace 'username' and 'hostname' with actual values
ssh username@hostname

# Retrieve content from a website
echo "Downloading a file from example.com..."
wget https://example.com/file.txt

# Display the downloaded file content
echo "Content of file.txt:"
cat file.txt

# Cleanup
rm file.txt
````
:::

