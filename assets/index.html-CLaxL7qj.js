import{_ as s,a,b as e}from"./virtu_arch3-ur_fdjp4.js";import{_ as i,o as t,c as l,a as o,b as p}from"./app-8Md2KhH_.js";const c="/learning-2023-devops/assets/docker70-D14Fv_su.png",r="/learning-2023-devops/assets/cargo2docker-Cd1GkbtG.png",d="/learning-2023-devops/assets/dockerarch-D0bQawVu.png",u="/learning-2023-devops/assets/vmvscontainer-BbTeuI5j.png",m="/learning-2023-devops/assets/mixed-CjUEpzFZ.png",v="/learning-2023-devops/assets/registry-CzA6VO0b.png",k="/learning-2023-devops/assets/docker-compose-CZ-BtvyM.png",h="/learning-2023-devops/assets/exercise_docker-zRrc4MAd.png",g={};function b(y,n){return t(),l("div",null,n[0]||(n[0]=[o('<h1 id="containerization" tabindex="-1"><a class="header-anchor" href="#containerization"><span>Containerization</span></a></h1><h2 id="definition" tabindex="-1"><a class="header-anchor" href="#definition"><span>Definition</span></a></h2><p>Containerization involves encapsulating applications and their dependencies into containers, allowing for efficient and consistent deployment across different environments. Containers package software in a portable, self-sufficient unit, ensuring isolation and enabling seamless deployment.</p><p>Objectives :</p><ul><li>Stop the ¬´¬†it works on my machine¬†¬ª syndrom</li><li>Be the link between dev and ops</li></ul><h2 id="an-old-history-70s" tabindex="-1"><a class="header-anchor" href="#an-old-history-70s"><span>An old history (70s)</span></a></h2><p><img src="'+c+'" alt="docker70s"></p><h4 id="what-is-it" tabindex="-1"><a class="header-anchor" href="#what-is-it"><span>What is it?</span></a></h4><ul><li>Software based on well known linux technologies</li><li>Yet another layers between software and hardware</li><li>Created to ease deployment of applications</li><li>Starting point: cargo transport</li></ul><h4 id="containers-for-softwares" tabindex="-1"><a class="header-anchor" href="#containers-for-softwares"><span>Containers‚Ä¶ for softwares ?</span></a></h4><ul><li>As cargo container solved the problem of ethergenious transport mode, does software containers can solve</li></ul><p><img src="'+r+'" alt="cargo2docker"></p><h2 id="the-market" tabindex="-1"><a class="header-anchor" href="#the-market"><span>The market</span></a></h2><ul><li><code>LXC</code> (Linux Containers): Offers lightweight, operating-system-level virtualization, enabling multiple isolated Linux systems on a single host. rkt (Rocket): Focuses on security and composability, providing a security-focused container runtime as an alternative to Docker.</li><li><code>Docker</code>: A widely used container platform enabling building, shipping, and running applications in containers, known for its user-friendly interface and comprehensive tooling.</li><li><code>Podman</code>: Docker alternative allowing container management without a daemon, offering a Docker-compatible command-line interface.</li><li><code>LXD</code> (Linux Containers Next): A container hypervisor with a REST API to manage system containers, aiming for a more user-friendly container management experience.</li><li><code>Linux-VServer</code>: Provides lightweight virtualization for partitioning a single server into isolated containers for security and resource control.</li><li><code>VMware vSphere Integrated Containers</code> (VIC)&quot; for basic container deployment and management within VMware vSphere environments.</li></ul><h4 id="what-is-a-container" tabindex="-1"><a class="header-anchor" href="#what-is-a-container"><span>What is a container ?</span></a></h4><h2 id="history" tabindex="-1"><a class="header-anchor" href="#history"><span>History</span></a></h2><h4 id="in-the-dark-ages-one-application-on-one-physical-server" tabindex="-1"><a class="header-anchor" href="#in-the-dark-ages-one-application-on-one-physical-server"><span>In the Dark ages : One application on One physical server</span></a></h4><p><img src="'+s+'" alt="virtu1"></p><ul><li>Slow deployment times</li><li>Huge costs</li><li>Wasted resources</li><li>Difficult to scale</li><li>Difficult to migrate</li><li>Vendor lock in</li></ul><h4 id="then-virtualization-one-server-multiple-apps-in-vms" tabindex="-1"><a class="header-anchor" href="#then-virtualization-one-server-multiple-apps-in-vms"><span>Then, virtualization : One server, multiple apps in VMs</span></a></h4><p><img src="'+a+'" alt="virtu2"></p><ul><li>Better resource pooling : One physical machine divided into multiple virtual machines</li><li>Easier to scale</li><li>VMs in the cloud <ul><li>Rapid elasticity</li><li>Pay as you go model</li></ul></li></ul><p><img src="'+e+'" alt="virtu3"></p><h4 id="but-vms" tabindex="-1"><a class="header-anchor" href="#but-vms"><span>But VMs</span></a></h4><ul><li><p>Each VMs stills requires</p><ul><li>CPU allocation</li><li>Storage</li><li>RAM</li><li>An entire guest operating system</li></ul></li><li><p>The more VMs you run, the more resources you need</p></li><li><p>Guest OS means wasted resources</p></li><li><p>Application portability not guaranteed</p></li></ul><h4 id="containers" tabindex="-1"><a class="header-anchor" href="#containers"><span>Containers</span></a></h4><p><img src="'+d+'" alt="dockerarch"></p><ul><li>Standardized packaging for software and dependencies</li><li>Isolate apps from each other</li><li>Share the same OS kernel</li><li>Works with all major Linux and Windows distributions</li></ul><h4 id="benefits" tabindex="-1"><a class="header-anchor" href="#benefits"><span>Benefits</span></a></h4><ul><li>Speed : No OS to boot = applications online in a seconds</li><li>Portability : less dependencies between process layers = ability to move between infrastructure</li><li>Efficiency : less OS overhead</li><li>Improved VM density</li></ul><h4 id="virtual-machines-vs-containers" tabindex="-1"><a class="header-anchor" href="#virtual-machines-vs-containers"><span>Virtual Machines VS Containers ?</span></a></h4><p><img src="'+u+'" alt="vmvscontainer"></p><ul><li>Containers are an app level construct</li><li>VMs are an infrastructure level construct to turn one machine into many servers</li></ul><h4 id="mixed-architecture" tabindex="-1"><a class="header-anchor" href="#mixed-architecture"><span>Mixed architecture</span></a></h4><p><img src="'+m+`" alt="mixed"></p><ul><li>Containers and VMs together provide a tremendous amount of flexibility for IT to optimally deploy and managed apps</li></ul><h2 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h2><h3 id="history-1" tabindex="-1"><a class="header-anchor" href="#history-1"><span>History</span></a></h3><ul><li><p><strong>2004: Solaris containers and Zones technology introduced</strong></p></li><li><p><strong>2008: Linux containers (LXC1.0) introduced</strong></p></li><li><p><strong>2013: Initial Release</strong></p><ul><li>Salomon Hykes starts docker as an internal project within dotCloud company</li><li><em>June 2013:</em> Docker was released as an open-source project by dotCloud, revolutionizing application deployment through containers.</li></ul></li><li><p><strong>2014: Rapid Growth and Adoption</strong></p><ul><li><em>March 2014:</em> Docker 1.0 launched, gaining attention for its ease of use and portability.</li><li><em>June 2014:</em> DockerCon 2014 introduced Docker Hub, a cloud-based repository for sharing container images.</li></ul></li><li><p><strong>2015: Expansion and Tooling</strong></p><ul><li><em>April 2015:</em> Docker 1.6 brought multi-host networking for secure communication.</li><li><em>June 2015:</em> Docker Engine 1.7 introduced orchestration and scheduling tools.</li><li><em>November 2015:</em> Docker Engine 1.9 enhanced networking, storage, and security.</li></ul></li><li><p><strong>2016: Maturation and Enterprise Focus</strong></p><ul><li><em>February 2016:</em> Docker Engine 1.10 introduced secrets management.</li><li><em>June 2016:</em> Docker Datacenter launched for enterprise-scale container management.</li></ul></li><li><p><strong>2017: Further Enterprise Expansion</strong></p><ul><li><em>March 2017:</em> Docker Enterprise Edition (EE) consolidated Docker&#39;s commercial offering.</li><li><em>October 2017:</em> Docker EE 17.06 added Kubernetes support.</li></ul></li><li><p><strong>2018-2019: Continued Enhancements</strong></p><ul><li><em>May 2018:</em> Docker Desktop for Mac and Windows simplified local development.</li><li><em>April 2019:</em> Docker Desktop introduced Kubernetes support.</li></ul></li><li><p><strong>2020-Present: Focus on Developer Experience and Security</strong></p><ul><li><em>June 2020:</em> Docker 19.03 emphasized improved developer experiences.</li><li><em>2021-2022:</em> Docker continued refining security, enhancing developer tools, and optimizing performance.</li></ul></li></ul><h3 id="statistics" tabindex="-1"><a class="header-anchor" href="#statistics"><span>Statistics</span></a></h3><ul><li>Docker Hub hosts millions of container images, supported by a vast community.</li><li>Billions of downloads and adoption by millions of developers and enterprises globally.</li><li>Remains one of the most popular containerization platforms, pivotal in container technology adoption.</li></ul><p>Throughout its evolution, Docker transformed from a niche tool to a fundamental technology, driving container adoption due to its user-friendliness, portability, and ecosystem growth.</p><h3 id="inside-docker" tabindex="-1"><a class="header-anchor" href="#inside-docker"><span>Inside docker</span></a></h3><p>Written in <a href="http://golang.org" target="_blank" rel="noopener noreferrer">GO</a> Unique tool upon:</p><ul><li><strong>LibContainer</strong> (using LXC as plugin : Cgroup and Namespacing) providing : <ul><li><strong>Filesystem isolation</strong>: each process container runs in a completely separate root filesystem.</li><li><strong>Resource isolation</strong>: system resources like cpu and memory can be allocated differently to each process container, using cgroups.</li><li><strong>Network isolation</strong>: each process container runs in its own network namespace, with a virtual interface and IP address of its own.</li></ul></li><li><strong>Storage Backends</strong> (devicemapper, AUFS, BTRFS, ‚Ä¶) providing : <ul><li><strong>Layered file system</strong>: root filesystems are created using ‚Äúcopy-on-write‚Äù, which makes deployment extremely fast, memory-cheap and disk-cheap.</li></ul></li></ul><h3 id="basic-usage" tabindex="-1"><a class="header-anchor" href="#basic-usage"><span>Basic usage</span></a></h3><p>Containerization platforms like Docker provide tools to create, deploy, and manage containers. Users can build containers from images, run them as instances, manage their lifecycle, and interact with them using container-specific commands.</p><ul><li><p><strong>Active Containers</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token function">ps</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><em>Output:</em></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">CONTAINER ID   IMAGE         COMMAND       CREATED       STATUS       PORTS      NAMES</span>
<span class="line">abcdef123456   my_container  &quot;/start.sh&quot;   1 hour ago    Up 1 hour   80/tcp     web_server</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>List All Containers (Active and Inactive):</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><em>Output:</em></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">CONTAINER ID   IMAGE         COMMAND       CREATED        STATUS      PORTS       NAMES</span>
<span class="line">abcdef123456   my_container  &quot;/start.sh&quot;   1 hour ago     Up 1 hour  80/tcp      web_server</span>
<span class="line">12345abcde     my_image      &quot;/bin/bash&quot;   3 days ago     Exited (0)              my_container</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>List Images:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> images</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>Pull an Image from a registry:</strong></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> NAME<span class="token punctuation">[</span>:TAG<span class="token operator">|</span>@DIGEST<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>Remove an Image:</strong></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> rmi <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>IMAGE<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Create a Container from an Image:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> create <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>Start a Running Container:</strong></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> start <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER <span class="token punctuation">[</span>CONTAINER<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Run a Container: ( create+start)</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE<span class="token punctuation">[</span>:TAG<span class="token operator">|</span>@DIGEST<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>Stop a Running Container:</strong></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> stop <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER <span class="token punctuation">[</span>CONTAINER<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Remove a Container:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token function">rm</span> <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER <span class="token punctuation">[</span>CONTAINER<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Port Forwarding (Map Host Port to Container Port):</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> HOST_PORT:CONTAINER_PORT IMAGE_NAME</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Execute a Command in a Running Container:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER COMMAND <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>View Container Logs:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> logs <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="custom-image-and-dockerfile" tabindex="-1"><a class="header-anchor" href="#custom-image-and-dockerfile"><span>Custom image and dockerFile</span></a></h3><h4 id="definition-1" tabindex="-1"><a class="header-anchor" href="#definition-1"><span>Definition</span></a></h4><p>A Docker image is a self-contained, immutable snapshot or template that includes an application&#39;s code, dependencies, and configuration, serving as the foundation to create and run containers.</p><h4 id="create-a-dockerfile" tabindex="-1"><a class="header-anchor" href="#create-a-dockerfile"><span>Create a dockerFile</span></a></h4><div class="language-docker line-numbers-mode" data-highlighter="prismjs" data-ext="docker" data-title="docker"><pre><code><span class="line"><span class="token comment"># Base Image</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">FROM</span> ubuntu:latest</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Maintainer Information</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">LABEL</span> maintainer=<span class="token string">&quot;Your Name &lt;your@email.com&gt;&quot;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Install Necessary Packages</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">RUN</span> apt-get update &amp;&amp; <span class="token operator">\\</span></span>
<span class="line">    apt-get install -y <span class="token operator">\\</span></span>
<span class="line">    package1 <span class="token operator">\\</span></span>
<span class="line">    package2</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Set Working Directory</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Copy Files/Directory to Container</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">COPY</span> . /app</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Expose Ports</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Define Environment Variables</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">ENV</span> ENV_VAR_NAME=value</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Run Application</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">CMD</span> [ <span class="token string">&quot;executable&quot;</span> ]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><code>FROM ubuntu:latest</code></li></ol><ul><li><strong><code>FROM</code></strong>: Specifies the base image for the new image being built.</li><li><strong><code>ubuntu:latest</code></strong>: Base image, in this case, Ubuntu, and <code>latest</code> tag referring to the most recent version.</li></ul><ol start="2"><li><code>LABEL maintainer=&quot;Your Name &lt;your@email.com&gt;&quot;</code></li></ol><ul><li><strong><code>LABEL</code></strong>: Adds metadata to the image.</li><li><strong><code>maintainer</code></strong>: Custom label key identifying the maintainer&#39;s information.</li></ul><ol start="3"><li><code>RUN apt-get update &amp;&amp; apt-get install -y package1 package2</code></li></ol><ul><li><strong><code>RUN</code></strong>: Executes commands within the container during the build process.</li><li><strong><code>apt-get update &amp;&amp; apt-get install -y package1 package2</code></strong>: Updates package lists and installs specified packages.</li></ul><ol start="4"><li><code>WORKDIR /app</code></li></ol><ul><li><strong><code>WORKDIR</code></strong>: Sets the working directory for subsequent commands in the Dockerfile.</li><li><strong><code>/app</code></strong>: Directory path within the container.</li></ul><ol start="5"><li><code>COPY . /app</code></li></ol><ul><li><strong><code>COPY</code></strong>: Copies files or directories from the host machine to the container.</li><li><strong><code>.</code></strong>: Represents the current directory on the host.</li><li><strong><code>/app</code></strong>: Destination directory in the container.</li></ul><ol start="6"><li><code>EXPOSE 80</code></li></ol><ul><li><strong><code>EXPOSE</code></strong>: Informs Docker that the container listens on specific network ports at runtime.</li><li><strong><code>80</code></strong>: Port number exposed by the container.</li></ul><ol start="7"><li><code>ENV ENV_VAR_NAME=value</code></li></ol><ul><li><strong><code>ENV</code></strong>: Sets environment variables inside the container.</li><li><strong><code>ENV_VAR_NAME=value</code></strong>: Name-value pair for an environment variable.</li></ul><ol start="8"><li><code>CMD [ &quot;executable&quot; ]</code></li></ol><ul><li><strong><code>CMD</code></strong>: Specifies the default command to be executed when a container starts.</li><li><strong><code>[ &quot;executable&quot; ]</code></strong>: Command and its arguments to run when the container starts.</li></ul><h4 id="building-and-pushing-an-image-to-docker-hub" tabindex="-1"><a class="header-anchor" href="#building-and-pushing-an-image-to-docker-hub"><span>Building and Pushing an Image to Docker Hub</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Build Docker Image</span></span>
<span class="line"><span class="token function">docker</span> build <span class="token parameter variable">-t</span> yourusername/repositoryname:tag <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Log in to Docker Hub (Enter your Docker Hub credentials)</span></span>
<span class="line"><span class="token function">docker</span> login</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Push Image to Docker Hub</span></span>
<span class="line"><span class="token function">docker</span> push yourusername/repositoryname:tag</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Replace placeholders:</p><ul><li><code>yourusername</code>: Your Docker Hub username.</li><li><code>repositoryname</code>: Name for your repository on Docker Hub.</li><li><code>tag</code>: Tag/version for your image (e.g., <code>latest</code>).</li></ul><h3 id="registry" tabindex="-1"><a class="header-anchor" href="#registry"><span>Registry</span></a></h3><p><img src="`+v+'" alt="registry"></p><p><code>Registries</code> store Docker <strong>images</strong>, acting as <strong>repositories</strong> where users can push, pull, and manage images. <code>Docker Hub</code> is a popular public registry, while private registries offer secure storage for proprietary or sensitive images within organizations.</p><h2 id="multi-container" tabindex="-1"><a class="header-anchor" href="#multi-container"><span>Multi-container</span></a></h2><p><img src="'+k+`" alt="docker-compose"></p><p>Docker Compose is a tool for defining and running multi-container Docker applications. It uses a YAML file (docker-compose.yml) to configure services, allowing users to define multiple containers, their configurations, networks, and volumes in a single file.</p><h3 id="docker-compose-yml-file" tabindex="-1"><a class="header-anchor" href="#docker-compose-yml-file"><span>docker-compose.yml file</span></a></h3><p>A Docker Compose file (<code>docker-compose.yml</code>) is used to define and run multi-container Docker applications. It&#39;s structured with key-value pairs and various keywords with YAML language defining each services</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">service1</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> imagename<span class="token punctuation">:</span>tag</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;host_port:container_port&quot;</span></span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;host_path:container_path&quot;</span></span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> KEY=VALUE</span>
<span class="line">    <span class="token key atrule">command</span><span class="token punctuation">:</span> command_to_run</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong><code>version</code></strong>: Specifies the Docker Compose file version.</li><li><strong><code>services</code></strong>: Defines the services or containers to be created and run.</li><li><strong><code>image</code></strong>: Specifies the image to use for the service.</li><li><strong><code>ports</code></strong>: Maps ports from the host to the container.</li><li><strong><code>volumes</code></strong>: Mounts volumes from the host to the container.</li><li><strong><code>environment</code></strong>: Sets environment variables for the service.</li><li><strong><code>command</code></strong>: Overrides the default command for the service.</li></ul><h3 id="basic-commands" tabindex="-1"><a class="header-anchor" href="#basic-commands"><span>Basic commands</span></a></h3><ul><li><p><strong>Start Services Defined in <code>docker-compose.yml</code>:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker-compose</span> up</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Start Services in Detached Mode:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Stop Services:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker-compose</span> down</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h2 id="exercises" tabindex="-1"><a class="header-anchor" href="#exercises"><span>Exercises</span></a></h2><h3 id="üß™-exercise-1-basic-commands" tabindex="-1"><a class="header-anchor" href="#üß™-exercise-1-basic-commands"><span>üß™ Exercise 1 - Basic commands</span></a></h3><ol><li>Install <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">docker desktop</a> on your computer</li><li>Have a look at the <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">docker hub</a> and pull an image of an HTTP server (httpd). You can find a documentation <a href="https://hub.docker.com/_/httpd" target="_blank" rel="noopener noreferrer">here</a></li><li>Find the commands on the course to</li></ol><ul><li>Pull HTTP apache server image from docker HUB</li><li>Start your first web server containerized with the url http://localhost:8080</li></ul><ol start="4"><li>Test it on your browser</li></ol><details class="hint-container details"><summary>solution</summary><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Pull the Apache HTTP Server image from Docker Hub</span></span>
<span class="line"><span class="token function">docker</span> pull httpd</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Run the Apache HTTP Server container</span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8080</span>:80 httpd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="üß™-exercise-2-image-creation" tabindex="-1"><a class="header-anchor" href="#üß™-exercise-2-image-creation"><span>üß™ Exercise 2 : Image creation</span></a></h3><p>Create your custom HTTP apache server image in a dockerfile that is functionnal locally and you will push it to <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">dockerHUB</a> You can choose your distribution and adapt RUN command accordingly. ( RedHat on the solution)</p><details class="hint-container details"><summary>solution</summary><div class="language-Dockerfile line-numbers-mode" data-highlighter="prismjs" data-ext="Dockerfile" data-title="Dockerfile"><pre><code><span class="line">FROM redhat/ubi8</span>
<span class="line"></span>
<span class="line">RUN yum update -y # Update the system</span>
<span class="line">RUN dnf install httpd -y # Install httpd</span>
<span class="line"></span>
<span class="line">ENTRYPOINT [&quot;/usr/sbin/httpd&quot;,&quot;-D&quot;,&quot;FOREGROUND&quot;]</span>
<span class="line">EXPOSE 80</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="üß™-exercise-3-registry-management" tabindex="-1"><a class="header-anchor" href="#üß™-exercise-3-registry-management"><span>üß™ Exercise 3 - Registry management</span></a></h3><p>Create your own repository to the registry DOCKER HUB and try to push a your docker HTTPD image to your registry</p><details class="hint-container details"><summary>solution</summary><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> tag <span class="token operator">&lt;</span>IMAGE_LOCAL_ID_OR_NAME<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>REPOSITORY_NAME_ON_DOCKER_HUB<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>IMAGE_NAME<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>TAG<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">docker</span> push <span class="token operator">&lt;</span>REPOSITORY_NAME_ON_DOCKER_HUB<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>IMAGE_NAME<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>TAG<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>You can use other repository services such as <a href="https://goharbor.io/" target="_blank" rel="noopener noreferrer">Harbor</a></p></div><h3 id="üß™-exercise-4-docker-compose-migration" tabindex="-1"><a class="header-anchor" href="#üß™-exercise-4-docker-compose-migration"><span>üß™ Exercise 4 - Docker compose migration</span></a></h3><p>Convert your previous HTTPD image and container with a docker-compose.yml config</p><details class="hint-container details"><summary>solution</summary><p><em>docker-compose.yml</em></p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3&#39;</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">web</span><span class="token punctuation">:</span>  </span>
<span class="line">   <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&#39;nginx:latest&#39;</span></span>
<span class="line">   <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">     <span class="token punctuation">-</span> <span class="token string">&#39;80:80&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="üß™-exercise-5-volume-management" tabindex="-1"><a class="header-anchor" href="#üß™-exercise-5-volume-management"><span>üß™ Exercise 5 - Volume management</span></a></h3><p>Map a local directory to your Apache container to serve your default index.html file of Apache in /usr/local/apache2/htdocs</p><details class="hint-container details"><summary>solution</summary><p>docker-compose.yml</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">webservice</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> myhttpd</span>
<span class="line">    <span class="token key atrule">build</span><span class="token punctuation">:</span> </span>
<span class="line">      <span class="token key atrule">context</span><span class="token punctuation">:</span> .</span>
<span class="line">      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;8080:80&quot;</span></span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ./site<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/local/apache2/htdocs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>create apache data folder and create index.html file</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">ls</span> ./site-data</span>
<span class="line">index.html</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Create a Dockerfile to build your image Dockerfile</p><div class="language-Dockerfile line-numbers-mode" data-highlighter="prismjs" data-ext="Dockerfile" data-title="Dockerfile"><pre><code><span class="line">FROM httpd:2.4</span>
<span class="line">COPY index.html /usr/local/apache2/htdocs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Start your containers with docker-compose</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">docker-compose</span> up</span>
<span class="line">Creating network <span class="token string">&quot;dockercompose_default&quot;</span> with the default driver</span>
<span class="line">Creating webservice <span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="üß™-exercise-6-practical-work" tabindex="-1"><a class="header-anchor" href="#üß™-exercise-6-practical-work"><span>üß™ Exercise 6 - Practical work</span></a></h3><p><img src="`+h+`" alt="docker"></p><p>Create a LAMP achitecture with 2 computers over a WiFi network as follows with :</p><ul><li>an Apache / Nginx service</li><li>a PHP service</li><li>a mariaDB or MongoDB service</li><li>a PHPMyAdmin or mongo-express</li></ul><details class="hint-container details"><summary>solution</summary><p><em>docker-compose.yml</em></p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">web</span><span class="token punctuation">:</span>  </span>
<span class="line">   <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&#39;nginx:latest&#39;</span></span>
<span class="line">   <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">     <span class="token punctuation">-</span> <span class="token string">&#39;127.0.0.1:8090:80&#39;</span></span>
<span class="line">   <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">     <span class="token punctuation">-</span> ./site<span class="token punctuation">:</span>/site</span>
<span class="line">     <span class="token punctuation">-</span> ./site.conf<span class="token punctuation">:</span>/etc/nginx/conf.d/default.conf</span>
<span class="line">   <span class="token key atrule">links</span><span class="token punctuation">:</span></span>
<span class="line">     <span class="token punctuation">-</span> php</span>
<span class="line">  <span class="token key atrule">php</span><span class="token punctuation">:</span></span>
<span class="line">   <span class="token key atrule">build</span><span class="token punctuation">:</span> </span>
<span class="line">     <span class="token key atrule">context</span><span class="token punctuation">:</span> .</span>
<span class="line">     <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> php.Dockerfile</span>
<span class="line">   <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> ./site<span class="token punctuation">:</span>/site</span>
<span class="line">        <span class="token punctuation">-</span> ./php.ini<span class="token punctuation">:</span>/usr/local/etc/php/conf.d/php.ini</span>
<span class="line">  </span>
<span class="line">  <span class="token key atrule">db</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>9.1.0</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>secret<span class="token punctuation">-</span>pw  <span class="token comment"># Set your root password</span></span>
<span class="line">      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> my_database          <span class="token comment"># Optional: Create a database on startup</span></span>
<span class="line">      <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> my_user                   <span class="token comment"># Optional: Create a user</span></span>
<span class="line">      <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> user_password         <span class="token comment"># Optional: User password</span></span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> mysql_data<span class="token punctuation">:</span>/var/lib/mysql          <span class="token comment"># Persist data</span></span>
<span class="line">      <span class="token punctuation">-</span> ./create_db.sql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d/create_db.sql<span class="token punctuation">:</span>ro</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span>                         <span class="token comment"># Expose MySQL port</span></span>
<span class="line">    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always                         <span class="token comment"># Restart policy</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">phpmyadmin</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> phpmyadmin</span>
<span class="line">    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> 9092<span class="token punctuation">:</span><span class="token number">80</span></span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> PMA_ARBITRARY=1</span>
<span class="line">      <span class="token punctuation">-</span> PMA_HOST=db</span>
<span class="line">      <span class="token punctuation">-</span> PMA_USER=my_user</span>
<span class="line">      <span class="token punctuation">-</span> PMA_PASSWORD=user_password</span>
<span class="line">      <span class="token punctuation">-</span> PMA_PORT=3306</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">mysql_data</span><span class="token punctuation">:</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>php.ini</em></p><div class="language-ini line-numbers-mode" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre><code><span class="line"><span class="token comment">#Activate PDO</span></span>
<span class="line"><span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">pdo.so</span></span>
<span class="line"><span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">pdo_mysql.so</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>create_db.sql</em></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">CREATE DATABASE my_database;</span>
<span class="line"></span>
<span class="line">CREATE TABLE my_table (</span>
<span class="line">  id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span>
<span class="line">  name VARCHAR(30) NOT NULL,</span>
<span class="line">  email VARCHAR(50) NOT NULL,</span>
<span class="line">  phone VARCHAR(20) NOT NULL</span>
<span class="line">);</span>
<span class="line"></span>
<span class="line">INSERT INTO my_table (name, email, phone) VALUES (&#39;John&#39;, &#39;john@example.com&#39;, &#39;555-555-5555&#39;);</span>
<span class="line">INSERT INTO my_table (name, email, phone) VALUES (&#39;Jane&#39;, &#39;jane@example.com&#39;, &#39;555-555-5555&#39;);</span>
<span class="line">INSERT INTO my_table (name, email, phone) VALUES (&#39;Bob&#39;, &#39;bob@example.com&#39;, &#39;555-555-5555&#39;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>php.Dockerfile</em></p><div class="language-Dockerfile line-numbers-mode" data-highlighter="prismjs" data-ext="Dockerfile" data-title="Dockerfile"><pre><code><span class="line">FROM php:fpm</span>
<span class="line">RUN docker-php-ext-install pdo pdo_mysql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><em>site.conf</em></p><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf" data-title="conf"><pre><code><span class="line">server {</span>
<span class="line">    listen 80;</span>
<span class="line">    index index.php index.html;</span>
<span class="line">    server_name 127.0.0.1;</span>
<span class="line">    error_log  /var/log/nginx/error.log;</span>
<span class="line">    access_log /var/log/nginx/access.log;</span>
<span class="line">    root /site;  </span>
<span class="line"></span>
<span class="line">    location ~ \\.php$ {</span>
<span class="line">        try_files $uri =404;</span>
<span class="line">        fastcgi_split_path_info ^(.+\\.php)(/.+)$;</span>
<span class="line">        fastcgi_pass php:9000;</span>
<span class="line">        fastcgi_index index.php;</span>
<span class="line">        include fastcgi_params;</span>
<span class="line">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span>
<span class="line">        fastcgi_param PATH_INFO $fastcgi_path_info;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>site/index.php</em></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>My First Heading<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>My first paragraph.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span></span>
<span class="line"><span class="token function">phpinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;display_errors&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;display_startup_errors&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token constant">E_ALL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$mysqlClient</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PDO</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;mysql:host=db;dbname=my_database;charset=utf8&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;my_user&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;user_password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$mysqlClient</span><span class="token operator">-&gt;</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">ATTR_ERRMODE</span><span class="token punctuation">,</span> <span class="token class-name static-context">PDO</span><span class="token operator">::</span><span class="token constant">ERRMODE_EXCEPTION</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Connected successfully&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">PDOException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Connection failed: &quot;</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;SELECT * FROM my_table&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$mysqlClient</span><span class="token operator">-&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;&lt;p&gt;Name: &quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Email: &quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;br&gt;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Phone: &quot;</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;phone&#39;</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&lt;/p&gt;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;0 results&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token delimiter important">?&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="hint-container tip"><p class="hint-container-title">PDO on php:fpm</p><p>Remember that you need to activate and install the PDO extension of your PHP container</p></div><h2 id="üìñ-further-reading" tabindex="-1"><a class="header-anchor" href="#üìñ-further-reading"><span>üìñ Further reading</span></a></h2><ul><li>De chroot √† Docker, Podman, et maintenant les modules Wasm, 40 ans d&#39;√©volution de la conteneurisation by Thomas SCHWENDER</li></ul>`,112),p("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/dikQOyAzdS4",title:"De chroot √† Docker, Podman, et maintenant les modules Wasm, 40 ans d'√©volution de la conteneurisation",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1)]))}const w=i(g,[["render",b],["__file","index.html.vue"]]),E=JSON.parse('{"path":"/container/","title":"Containerization","lang":"en-US","frontmatter":{"description":"Containerization Definition Containerization involves encapsulating applications and their dependencies into containers, allowing for efficient and consistent deployment across ...","head":[["meta",{"property":"og:url","content":"https://worldline.github.io/gbrah/learning-2023-devops/learning-2023-devops/container/"}],["meta",{"property":"og:title","content":"Containerization"}],["meta",{"property":"og:description","content":"Containerization Definition Containerization involves encapsulating applications and their dependencies into containers, allowing for efficient and consistent deployment across ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-04-29T15:38:35.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-29T15:38:35.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Containerization\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-29T15:38:35.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Definition","slug":"definition","link":"#definition","children":[]},{"level":2,"title":"An old history (70s)","slug":"an-old-history-70s","link":"#an-old-history-70s","children":[]},{"level":2,"title":"The market","slug":"the-market","link":"#the-market","children":[]},{"level":2,"title":"History","slug":"history","link":"#history","children":[]},{"level":2,"title":"Docker","slug":"docker","link":"#docker","children":[{"level":3,"title":"History","slug":"history-1","link":"#history-1","children":[]},{"level":3,"title":"Statistics","slug":"statistics","link":"#statistics","children":[]},{"level":3,"title":"Inside docker","slug":"inside-docker","link":"#inside-docker","children":[]},{"level":3,"title":"Basic usage","slug":"basic-usage","link":"#basic-usage","children":[]},{"level":3,"title":"Custom image and dockerFile","slug":"custom-image-and-dockerfile","link":"#custom-image-and-dockerfile","children":[]},{"level":3,"title":"Registry","slug":"registry","link":"#registry","children":[]}]},{"level":2,"title":"Multi-container","slug":"multi-container","link":"#multi-container","children":[{"level":3,"title":"docker-compose.yml file","slug":"docker-compose-yml-file","link":"#docker-compose-yml-file","children":[]},{"level":3,"title":"Basic commands","slug":"basic-commands","link":"#basic-commands","children":[]}]},{"level":2,"title":"Exercises","slug":"exercises","link":"#exercises","children":[{"level":3,"title":"üß™ Exercise 1 - Basic commands","slug":"üß™-exercise-1-basic-commands","link":"#üß™-exercise-1-basic-commands","children":[]},{"level":3,"title":"üß™ Exercise 2 : Image creation","slug":"üß™-exercise-2-image-creation","link":"#üß™-exercise-2-image-creation","children":[]},{"level":3,"title":"üß™ Exercise 3 - Registry management","slug":"üß™-exercise-3-registry-management","link":"#üß™-exercise-3-registry-management","children":[]},{"level":3,"title":"üß™ Exercise 4 - Docker compose migration","slug":"üß™-exercise-4-docker-compose-migration","link":"#üß™-exercise-4-docker-compose-migration","children":[]},{"level":3,"title":"üß™ Exercise 5 - Volume management","slug":"üß™-exercise-5-volume-management","link":"#üß™-exercise-5-volume-management","children":[]},{"level":3,"title":"üß™ Exercise 6 - Practical work","slug":"üß™-exercise-6-practical-work","link":"#üß™-exercise-6-practical-work","children":[]}]},{"level":2,"title":"üìñ Further reading","slug":"üìñ-further-reading","link":"#üìñ-further-reading","children":[]}],"git":{"updatedTime":1745941115000,"contributors":[{"name":"Brah","email":"brah.gharbi@gmail.com","commits":11,"url":"https://github.com/Brah"},{"name":"Ibrahim Gharbi","email":"brah.gharbi@gmail.com","commits":4,"url":"https://github.com/Ibrahim Gharbi"},{"name":"A187839","email":"ibrahim.gharbi@worldline.com","commits":9,"url":"https://github.com/A187839"}]},"filePathRelative":"container/README.md","autoDesc":true}');export{w as comp,E as data};
